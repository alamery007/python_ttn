<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Ввод данных</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

</head>
<body>
    <h1>Введите новые данные</h1>
    <form method="POST" action="/submit-data"> <!-- Укажите маршрут для обработки данных -->
        <label for="driver_full_name">Полное имя водителя:</label>
        <input type="text" id="driver_full_name" name="driver_full_name" required>
        <small class="hint">Пример: Иванов Иван Иванович</small>

                <label for="trailer_number">Номер прицепа:</label><br>
        <input type="text" id="trailer_number" name="trailer_number" required><br>

        <label for="total">Всего:</label><br>
        <input type="number" id="total" name="total" required><br>

        <label for="section1">Секция 1:</label><br>
        <input type="number" id="section1" name="section1"><br>

        <label for="section2">Секция 2:</label><br>
        <input type="number" id="section2" name="section2"><br>

        <label for="section3">Секция 3:</label><br>
        <input type="number" id="section3" name="section3"><br>

        <label for="section4">Секция 4:</label><br>
        <input type="number" id="section4" name="section4"><br>

        <label for="section5">Секция 5:</label><br>
        <input type="number" id="section5" name="section5"><br>

        <label for="section6">Секция 6:</label><br>
        <input type="number" id="section6" name="section6"><br>

        <label for="section7">Секция 7:</label><br>
        <input type="number" id="section7" name="section7"><br><br>


        <div class="button-group">
            <button type="submit">Сохранить данные</button>
            <button type="button" onclick="window.history.back();">Назад</button> <!-- Кнопка для возврата на предыдущую страницу -->
        </div>
    </form>
        <script>
        $(document).ready(function() {
            // Создаем элемент для уведомлений
            const notification = $('<div id="notification"></div>').css({
                'display': 'none', // Скрываем изначально
                'position': 'absolute',
                'top': '10px',
                'left': '50%',
                'transform': 'translateX(-50%)',
                'background-color': '#e0ffe0',  // Зелёный фон по умолчанию
                'border': '1px solid #4caf50',    // Зелёная рамка
                'padding': '10px',
                'margin': '10px 0',
                'border-radius': '5px',
                'z-index': 1000
            });

            $('body').prepend(notification); // Добавляем его в верхнюю часть страницы

            $('form').on('submit', function(event) {
                // Убираем проверки
                // Отправка формы
                $.ajax({
                    type: 'POST',
                    url: $(this).attr('action'),
                    data: $(this).serialize(),
                    success: function(response) {
                        notification.text(response.message).css({
                            'display': 'block',
                            'background-color': '#e0ffe0',  // Зелёный фон
                            'border': '1px solid #4caf50'    // Зелёная рамка
                        });
                    },
                    error: function() {
                        notification.text('Произошла ошибка при сохранении данных.').css({
                            'display': 'block',
                            'background-color': '#ffe0e0',  // Красный фон
                            'border': '1px solid #f44336'   // Красная рамка
                        });
                    }
                });

                event.preventDefault(); // Отменяем стандартное поведение формы
            });
        });

        </script>
</body>
</html>
